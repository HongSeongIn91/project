// 회원정보
CREATE TABLE MEMBER (
    M_ID VARCHAR2(16) PRIMARY KEY,
    M_PW VARCHAR2(16) NOT NULL,
    M_REGNUM VARCHAR2(8) NOT NULL,
    M_EMAIL VARCHAR2(8) NOT NULL UNIQUE,
    M_PHONE VARCHAR2(13) NOT NULL,
    M_REGDATE DATE NOT NULL
    );
   
// 영화정보
CREATE TABLE MOVIE_INFO (
    MV_NUM NUMBER PRIMARY KEY,
    MV_TITLE VARCHAR2(200) NOT NULL,
    MV_SUMMARY VARCHAR2(3000) NOT NULL,
    MV_RELDATE DATE NOT NULL,
    MV_TIME NUMBER(3) NOT NULL,
    MV_RATING VARCHAR2(30) NOT NULL,
    MV_DIRECTOR VARCHAR2(50) NOT NULL,
    MV_ACTOR VARCHAR2(100) NOT NULL
    );

// 기대평
CREATE TABLE PREVIEW (
    PRE_NUM NUMBER PRIMARY KEY,
    PRE_MV_NUM NUMBER,
    PRE_M_ID VARCHAR2(16),
    PRE_REGDATE DATE NOT NULL,
    PRE_CONTENT VARCHAR2(420) NOT NULL,
    CONSTRAINT FK_PRE_MV_NUM FOREIGN KEY(PRE_MV_NUM) REFERENCES MOVIE_INFO(MV_NUM),
    CONSTRAINT FK_PRE_M_ID FOREIGN KEY(PRE_M_ID) REFERENCES MEMBER(M_ID)
    );

// 감상평
CREATE TABLE REVIEW (
    RV_NUM NUMBER PRIMARY KEY,
    RV_MV_NUM NUMBER,
    RV_M_ID VARCHAR2(16),
    RV_REGDATE DATE NOT NULL,
    RV_TITLE VARCHAR2(300) NOT NULL,
    RV_READCNT NUMBER NOT NULL,
    RV_PUBLIC NUMBER(1,0),
    CONSTRAINT FK_RV_MV_NUM FOREIGN KEY(RV_MV_NUM) REFERENCES MOVIE_INFO(MV_NUM),
    CONSTRAINT FK_RV_M_ID FOREIGN KEY(RV_M_ID) REFERENCES MEMBER(M_ID)
    );
    
// 감상평_내용
CREATE TABLE REVIEW_CONTENT (
    RVC_RV_NUM NUMBER PRIMARY KEY,
    RVC_CONTENT CLOB NOT NULL,
    CONSTRAINT FK_RV_NUM FOREIGN KEY(RVC_RV_NUM) REFERENCES REVIEW(RV_NUM)
    );

// 댓글
CREATE TABLE REVIEW_REPLY (
    RP_NUM NUMBER PRIMARY KEY,
    RP_RV_NUM NUMBER,
    RP_M_ID VARCHAR2(16),
    RP_REGDATE DATE NOT NULL,
    RP_CONTENT VARCHAR2(900) NOT NULL,
    CONSTRAINT FK_RP_RV_NUM FOREIGN KEY(RP_RV_NUM) REFERENCES REVIEW(RV_NUM),
    CONSTRAINT FK_RP_M_ID FOREIGN KEY(RP_M_ID) REFERENCES MEMBER(M_ID)
    );

CREATE SEQUENCE MOVIE_INFO_SEQUENCE 
START WITH 1
INCREMENT BY 1
MINVALUE 0
MAXVALUE 10000
NOCACHE;

CREATE SEQUENCE PREVIEW_SEQUENCE 
START WITH 1
INCREMENT BY 1
MINVALUE 0
MAXVALUE 10000
NOCACHE;

CREATE SEQUENCE REVIEW_SEQUENCE 
START WITH 1
INCREMENT BY 1
MINVALUE 0
MAXVALUE 10000
NOCACHE;

CREATE SEQUENCE REVIEW_REPLY_SEQUENCE 
START WITH 1
INCREMENT BY 1
MINVALUE 0
MAXVALUE 10000
NOCACHE;
